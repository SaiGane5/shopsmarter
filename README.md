# ShopSmarter: AI-Powered E-Commerce Platform

## üåü Project Overview

ShopSmarter is a next-generation, AI-powered e-commerce application that revolutionizes the online shopping experience. It leverages a sophisticated backend built with Flask and a dynamic frontend built with React. At its core, ShopSmarter utilizes advanced AI models for deep image analysis, conversational product search, and intelligent, real-time cart assistance, providing a personalized and interactive journey for every user.

The system is designed to understand not just what users search for, but the intent and context behind it. From uploading an image to find similar products to refining search results with natural language, ShopSmarter offers a glimpse into the future of retail.

## ‚ú® Wow Features

-   **ü§ñ Aurra - Your AI Shopping Assistant**:
    - Natural language understanding with context memory
    - Advanced price interpretation (ranges, comparisons, preferences)
    - Multi-turn conversations with follow-up refinements
    - Personality-driven responses with shopping expertise
    - Smart category and intent detection
    - Proactive suggestions based on browsing patterns

-   **üé® Advanced UI/UX Features**:
    - Dark/Light mode with smooth transitions
    - Animated product cards with hover effects
    - Professional micro-interactions and transitions
    - Responsive grid layouts with Framer Motion
    - Gradient backgrounds with backdrop blur
    - Custom theme colors for different sections
    - Advanced filtering system with visual feedback

-   **üõçÔ∏è Smart Shopping Experience**:
    - Real-time cart management with local storage
    - Dynamic quantity controls with animations
    - Price range quick-select buttons
    - Multi-level category filtering
    - Advanced rating system with visual indicators
    - Stock status indicators with animations
    - Save amount highlights with badges
    - Trending and Latest sections with unique styling

-   **üó£Ô∏è Voice-to-Text Search**: 
    - Seamless search using voice commands
    - Multi-language support via Web Speech API
    - Real-time transcription with noise filtering
    - Natural conversation flow with Aurra

-   **üß† Advanced NLP Engine**:
    - Context-aware query understanding
    - Price range detection with 15+ patterns
    - Category extraction with hierarchy awareness
    - Color preference analysis with similarity matching
    - Question handling ("is this available in blue?")
    - Multi-attribute refinement ("cheaper and more formal")

-   **üì∏ AI-Powered Visual Search**:
    - Upload any image to find similar products
    - Advanced CLIP model integration
    - Gender-aware recommendations
    - Deep color and pattern analysis
    - Style transfer suggestions
    - Visual similarity scoring

-   **üéØ Smart Complementary Products**:
    - True complementary logic with outfit matching
    - Fashion-aware recommendations
    - Context-sensitive suggestions
    - Style consistency checking
    - Complete-the-look suggestions

-   **üö® Intelligent Notifications**:
    - Real-time floating notifications
    - Smart dismiss system with reminders
    - Context-aware triggers
    - Price drop alerts
    - Back-in-stock notifications
    - Wishlist updates
    - Cart abandonment reminders

-   **üí∞ Dynamic AI Pricing**:
    - Real-time price optimization
    - Smart discounts based on behavior
    - Purchase probability prediction
    - Bundle pricing suggestions
    - Competitive price monitoring
    - Flash sale countdown timers
    - Bulk purchase discounts

-   **üß† Intelligent Cart Assistant**:
    - Personalized product suggestions
    - Dynamic bundle discounts
    - Free shipping optimization
    - Style consistency checker
    - Size recommendations
    - Cross-sell suggestions
    - Save for later feature

## üé® Frontend Features

### 1. Modern UI Components
- **Responsive Grid System**:
  - Dynamic grid layouts for different screen sizes
  - Smooth transitions between layouts
  - Optimized image loading and caching
  - Lazy loading for performance

- **Interactive Product Cards**:
  - Hover animations and scaling effects
  - Quick-view functionality
  - Add to cart animations
  - Price comparison displays
  - Discount badges with gradients

- **Smart Filters**:
  - Real-time filter updates
  - Multi-select categories
  - Price range sliders
  - Rating filters with visual stars
  - Stock status toggles

### 2. Advanced Navigation
- **Smart Search**:
  - Auto-complete suggestions
  - Recent searches history
  - Voice search integration
  - Category-based search
  - Trending searches

- **Category Navigation**:
  - Hierarchical category structure
  - Visual category icons
  - Quick category filters
  - Breadcrumb navigation
  - Category-specific layouts

### 3. Shopping Experience
- **Cart Management**:
  - Real-time cart updates
  - Quantity adjustments
  - Price calculations
  - Cart persistence
  - Cross-device sync

- **Product Views**:
  - Gallery view with zoom
  - Quick view modals
  - Related products carousel
  - Size guide integration
  - Color variants display

### 4. User Experience
- **Theme System**:
  - Dark/Light mode toggle
  - Custom color schemes
  - Smooth transitions
  - Persistent preferences
  - Automatic system preference detection

- **Animations**:
  - Page transitions
  - Loading states
  - Micro-interactions
  - Scroll animations
  - Toast notifications

### 5. Performance Features
- **Optimization**:
  - Code splitting
  - Image optimization
  - Lazy loading
  - Caching strategies
  - Performance monitoring

- **Responsive Design**:
  - Mobile-first approach
  - Tablet optimization
  - Desktop enhancements
  - Touch-friendly controls
  - Adaptive layouts

### Section-Specific Features

#### Latest Arrivals Section
- **Visual Design**:
  - Green theme with gradient accents
  - "Just Arrived" badges with backdrop blur
  - Smaller discount range (5-20%)
  - New arrival indicators
  - Fresh product highlights

- **Interaction**:
  - Quick-add to cart functionality
  - Real-time stock status
  - Dynamic pricing with original price display
  - Savings calculator
  - Rating system with review counts

#### Trending Section
- **Visual Design**:
  - Orange/Red theme with gradient accents
  - "Hot Deal" badges for high discounts
  - Larger discount range (20-50%)
  - Trending indicators
  - Popular product highlights

- **Interaction**:
  - Enhanced cart controls
  - Popularity-based sorting
  - Higher discount visibility
  - Dynamic price comparisons
  - Trending status indicators

#### Common Features
- **Product Cards**:
  - Hover animations with scale effect
  - Image zoom on hover
  - Gradient backgrounds
  - Responsive layout
  - Optimized loading

- **Filter System**:
  - Category-specific filters
  - Gender-specific filters
  - Price range controls
  - Rating filters
  - Stock status toggle
  - Sort options

## üîç Complete Feature List

### Enhanced Search System
- Multi-modal search (text + image + voice)
- Comprehensive query cleaning (handles typos, variations, whitespace)
- Voice command processing with natural language understanding
- Real-time search suggestions and auto-complete

### AI Recommendation Engine
- FAISS vector similarity search with 512-dimensional embeddings
- Gender-aware filtering (prevents men's items in women's searches)
- Confidence scoring for recommendation quality
- Feature-based matching (color, style, material)

### Smart Cart & Checkout
- AI cart analysis with behavioral insights
- Purchase prediction algorithms with completion probability
- Dynamic pricing engine with real-time discounts
- Smart shipping calculations with free shipping optimization
- Professional animations using Framer Motion

### Visual Enhancements
- Professional alert system with floating notifications
- Color-coded urgency indicators (red=urgent, green=savings, blue=info)
- Animated progress bars for time-sensitive alerts
- Smooth transitions and micro-interactions

### Real-Time Features & Integrations
- **Cart Synchronization**:
  - Cross-tab cart synchronization using localStorage
  - Real-time cart update events
  - Persistent cart state across sessions
  - Automatic quantity management

- **Dynamic Product Display**:
  - Section-specific offer calculations (Latest vs Trending)
  - Automatic discount badge generation
  - Real-time price and savings calculations
  - Dynamic rating and review generation

- **Smart Filtering System**:
  - Real-time filter application without page reload
  - Smart gender detection in product descriptions
  - Category keyword matching system
  - Advanced price range quick selectors
  - Rating-based sorting with visual feedback

- **Theme Integration**:
  - System-aware dark mode detection
  - Smooth theme transitions
  - Section-specific color schemes
  - Custom scrollbar theming
  - Gradient background effects

- **Performance Optimizations**:
  - React.memo for optimized rendering
  - Debounced scroll handlers
  - Optimized image loading
  - Smart component updates
  - Event cleanup on unmount

## üîß Backend Pipeline & Architecture

### AI Processing Pipeline
1. Image Upload ‚Üí CLIP Feature Extraction (512D vectors)
2. Advanced Color Analysis
   - Primary color detection
   - Accent color detection
   - Color confidence scoring
   - Similar color mapping
3. Gender & Age Detection
   - Ultra-strict gender matching
   - Age group classification
   - Person detection verification
4. FAISS Similarity Search ‚Üí Top-K candidates
5. Re-ranking with Composite Scoring
   - Primary color similarity (35% weight)
   - Gender/Age matching (50% weight)
   - Category matching (10% weight)
   - Subcategory refinement (5% weight)
6. Aurra NLP Processing
   - Query intent detection
   - Price range extraction (15+ patterns)
   - Category hierarchy mapping
   - Multi-attribute refinement
   - Context memory management
   - Natural language response generation
7. Complementary Product Analysis
8. Cart Behavior Analysis ‚Üí Purchase predictions

### Data Processing Pipeline
1. **Data Ingestion (`services/load_data.py`)**:
   - Downloads Fashion Product Images dataset
   - Processes and resizes images (800x800 max)
   - Generates synthetic pricing
   - Saves optimized JPEG images (85% quality)

2. **Feature Extraction (`services/embedding_service.py`)**:
   - CLIP model for image embeddings
   - Batch processing (4 images per batch)
   - Memory-optimized processing
   - Garbage collection management

3. **Vector Index Creation**:
   - FAISS flat index for stability
   - 512-dimensional vector space
   - Product ID mapping
   - Index persistence

4. **Database Integration**:
   - Batch loading (50 products per batch)
   - Transaction management
   - Rollback protection
   - Safe database updates

### Search Processing Flow
1. Query Processing:
   - Multi-modal input handling (text/image/voice)
   - Query normalization
   - Intent extraction
   - Context preservation

2. Primary Search:
   - Vector similarity search (FAISS)
   - Color-aware matching
   - Gender/Age filtering
   - Category refinement

3. Result Refinement:
   - Composite score calculation
   - Color similarity weighting
   - Gender/Age validation
   - Category alignment

4. Response Generation:
   - Sorted results
   - Relevance scores
   - Feature highlights
   - Similar color suggestions

## üõ†Ô∏è Tech Stack

-   **Backend**: Flask (Python 3.13.3)
-   **Frontend**: React with Framer Motion
-   **Database**: SQLite (for development)
-   **AI Models & Services**:
    -   **Language Model**: `google/gemini-2.0-flash-exp:free` via OpenRouter API
    -   **Image Embeddings**: `openai/clip-vit-base-patch32`
    -   **Vector Search**: `FAISS (Facebook AI Similarity Search)`
    -   **Voice Recognition**: Web Speech API
    -   **Data Loading**: `Hugging Face Datasets`
-   **Key Python Libraries**: `Flask`, `SQLAlchemy`, `transformers`, `sentence-transformers`, `Pillow`, `numpy`, `pandas`, `faiss-cpu`
-   **Key Frontend Libraries**: `react`, `framer-motion`, `tailwindcss`, `axios`

---

## üîß Backend Pipeline & Architecture

The backend is designed as a modular, service-oriented architecture. Here's a step-by-step overview of the data and logic flow:

### 1. Data Ingestion and Processing

-   **`services/load_data.py`**: This is a one-time script that orchestrates the entire data setup process.
-   **Download**: It fetches the "Fashion Product Images (Small)" dataset from Kaggle (via Hugging Face Datasets).
-   **Process**: It cleans the data, generates synthetic prices, saves product images to the `static/images` folder, and stores the structured product metadata. For stability, it defaults to processing the first 500 products.
-   **Database Load**: The processed metadata is loaded into a SQLite database, managed by `SQLAlchemy` models defined in `database/models.py`.

### 2. Embedding Generation

-   **`services/embedding_service.py`**: After the data is loaded, this service is called to generate vector embeddings.
-   **Image Embeddings**: It uses the CLIP model to process each product image and generate a 512-dimension vector that represents its visual features.
-   **Text Embeddings**: It creates a descriptive text string for each product (name, category, etc.) and uses the same CLIP model to generate a text-based embedding.
-   **Storage**: These embeddings are saved as `.npy` files.

### 3. FAISS Indexing

-   **`create_faiss_index`**: A FAISS index is built from the image embeddings. This index is a highly optimized data structure that allows for incredibly fast similarity searches. The index is saved as `faiss_index.bin`.

### 4. The Recommendation & Search Flow

This is the core runtime loop of the application.

-   **Request**: A user action on the frontend triggers an API request to one of the `routes/`.
-   **Vector Search (`services/vector_search.py`)**:
    -   For an image search, the uploaded image is converted to an embedding. For a text search, the query is used.
    -   This embedding is used to query the FAISS index, which returns a list of the most similar product IDs.
-   **Re-ranking and Filtering**: The initial list of candidates from FAISS is then re-ranked using a sophisticated scoring function (`calculate_primary_color_similarity_score`) that considers attributes like gender, age, and primary colors for a much more accurate result.
-   **NLP Refinement (`services/nlp_agent.py`)**:
    -   If the user provides a natural language prompt (e.g., "cheaper"), the `nlp_agent` parses it to extract intent (price, color, category).
    -   It can either filter the current results directly or, for more complex queries, sends the product list and the prompt to the Gemini LLM via OpenRouter.
    -   The LLM returns a filtered/re-ranked list of products and a natural language response to show the user.
-   **Response**: The final JSON response is sent back to the frontend.

## üåê API Routes

The backend exposes the following API endpoints:

### Image Analysis & Search
| Method | Endpoint                             | Description                                                                                             |
| :----- | :----------------------------------- | :------------------------------------------------------------------------------------------------------ |
| `POST` | `/api/image/upload`                  | Upload and analyze image with CLIP model, color detection, and person detection                         |
| `POST` | `/api/image/search`                  | Find visually similar products using CLIP embeddings and color-aware matching                           |
| `POST` | `/api/image/features`                | Extract detailed features from image (colors, patterns, gender, age group)                              |

### Product Search & Recommendations
| Method | Endpoint                             | Description                                                                                             |
| :----- | :----------------------------------- | :------------------------------------------------------------------------------------------------------ |
| `GET`  | `/api/products/search`               | Multi-modal search with support for text, filters, and sorting                                         |
| `POST` | `/api/recommendations/similar`       | Find similar products with composite scoring (color, gender, category weights)                          |
| `POST` | `/api/recommendations/complementary` | Get complementary products based on outfit completion rules                                             |
| `POST` | `/api/recommendations/refine`        | Refine results with natural language prompts                                                           |

### Cart & Checkout
| Method | Endpoint                             | Description                                                                                             |
| :----- | :----------------------------------- | :------------------------------------------------------------------------------------------------------ |
| `POST` | `/api/cart/analyze`                  | Analyze cart contents for compatibility and completeness                                                |
| `POST` | `/api/cart/suggestions`              | Get personalized suggestions based on cart items                                                        |
| `POST` | `/api/cart/pricing`                  | Calculate dynamic pricing and potential discounts                                                       |

### User Management
| Method | Endpoint                             | Description                                                                                             |
| :----- | :----------------------------------- | :------------------------------------------------------------------------------------------------------ |
| `POST` | `/api/user/register`                 | Register new user with preferences                                                                      |
| `GET`  | `/api/user/preferences/{id}`         | Get user preferences                                                                                    |
| `PUT`  | `/api/user/preferences/{id}`         | Update user preferences                                                                                 |
| `GET`  | `/api/user/history/{id}`             | Get user's interaction history                                                                          |

---

## üöÄ Setup Instructions

### üêß Linux/macOS Setup Commands

#### 1. Repository Setup
```bash
# Clone repository
git clone https://github.com/SaiGane5/shopsmarter.git
cd shopsmarter

# Navigate to backend
cd backend
```

#### 2. Python Environment Setup
```bash
# Create virtual environment
python3 -m venv .venv

# Activate virtual environment
source .venv/bin/activate

# Verify Python version (should be 3.10+)
python --version

# Install core dependencies
pip install -r requirements.txt
pip install datasets
```

#### 3. Environment Variables (`.env` file)
Create a `.env` file in the `backend/` directory and add your OpenRouter API key:
```text
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_URL=https://openrouter.ai/api/v1/chat/completions
```

#### 4. Data Loading & AI Setup
```bash
# Load Fashion dataset and generate embeddings
python -m services.load_data
```

#### 5. Backend Server
```bash
# Start Flask development server
python app.py

# Alternative with specific host/port
python app.py --host=0.0.0.0 --port=8000
```

#### 6. Frontend Setup
```bash
# Open new terminal and navigate to frontend
cd ../frontend

# Install Node.js dependencies
npm install

# Start React development server
npm start
```

---

### üñ•Ô∏è Windows Setup Commands

#### 1. Repository Setup (Windows)
```powershell
# Clone repository
git clone https://github.com/SaiGane5/shopsmarter.git
cd shopsmarter

# Navigate to backend
cd backend
```

#### 2. Python Environment Setup (Windows)
```powershell
# Create virtual environment
python -m venv .venv

# Activate virtual environment
.\.venv\Scripts\activate

# Verify Python version
python --version

# Install core dependencies
pip install -r requirements.txt
pip install datasets
```

#### 3. Environment Variables (`.env` file)
Create a `.env` file in the `backend/` directory and add your OpenRouter API key:
```text
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_URL=https://openrouter.ai/api/v1/chat/completions
```

#### 4. Data Loading & AI Setup (Windows)
```powershell
# Load Fashion dataset and generate embeddings
python -m services.load_data
```

#### 5. Backend Server (Windows)
```powershell
# Start Flask development server
python app.py

# Alternative with specific host/port
python app.py --host=127.0.0.1 --port=8000
```

#### 6. Frontend Setup (Windows)
```powershell
# Open new Command Prompt and navigate to frontend
cd ..\frontend

# Install Node.js dependencies
npm install

# Start React development server
npm start
```

## üß™ Testing & Validation

### Backend API Testing

```bash
# Health check
curl http://127.0.0.1:8000/api/health

# Image upload test
curl -X POST -F "image=@test_image.jpg" http://127.0.0.1:8000/api/image/upload

# Search test
curl "http://127.0.0.1:8000/api/products/search?q=blue+dress"
```

### Frontend Testing

```bash
# Run unit tests
npm test

# Run end-to-end tests
npm run test:e2e
```

## üîê Environment Configuration

### Required Environment Variables

```bash
# OpenRouter AI API Configuration
OPENROUTER_API_KEY=your_api_key_here
OPENROUTER_URL=https://openrouter.ai/api/v1/chat/completions

# Flask Configuration
FLASK_ENV=development
DEBUG=True
PORT=8000

# Database Configuration (if using external DB)
DATABASE_URL=sqlite:///shopsmarter.db

# Security Keys (for production)
SECRET_KEY=your_secret_key_here
JWT_SECRET_KEY=your_jwt_secret_here

# CORS Configuration
CORS_ORIGINS=http://localhost:3000
```

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Team Name: White Hats

### Team Members:
- Sai Ganesh  
- Yashwanth Varma  
- Rushikesh Kapale
